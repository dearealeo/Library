---
interface Props {
  title: string;
  description?: string;
}

const { title, description = "Library documentation and resources" } =
  Astro.props;
const currentYear = new Date().getFullYear();
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'unsafe-inline' 'self'; script-src 'self' 'unsafe-inline'; connect-src 'self'; img-src 'self' data:; font-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'none'"
    />
    <meta name="description" content={description} />
    <meta name="referrer" content="no-referrer" />
    <meta name="color-scheme" content="light dark" />
    <link rel="dns-prefetch" href="https://github.com" />
    <link rel="preconnect" href="https://dearealeo.github.io" />
    <link rel="alternate" type="application/rss+xml" title="Library RSS Feed" href="/Library/rss.xml" />
    <title>{title}</title>
    <script>
      if (typeof window !== "undefined") {
        window.__astro_dev_toolbar__ = window.__astro_dev_toolbar__ || {};
        window.__astro_dev_toolbar__.latestAstroVersion =
          window.__astro_dev_toolbar__.latestAstroVersion || "5.9.3";
      }
    </script>
    <style>
      :root {
        --gray-1: rgb(142, 142, 147);
        --gray-2: rgb(174, 174, 178);
        --gray-3: rgb(199, 199, 204);
        --gray-4: rgb(209, 209, 214);
        --gray-5: rgb(229, 229, 234);
        --gray-6: rgb(242, 242, 247);
        --gray-7: rgb(99, 99, 102);
        --gray-8: rgb(72, 72, 74);
        --gray-9: rgb(58, 58, 60);
        --gray-10: rgb(44, 44, 46);
        --gray-11: rgb(28, 28, 30);
        --gray-12: rgb(0, 0, 0);
        --white: rgb(255, 255, 255);

        --color-primary: var(--gray-11);
        --color-secondary: var(--gray-1);
        --color-accent: var(--gray-7);
        --color-bg: var(--white);
        --color-badge-bg: var(--gray-3);
        --color-border: var(--color-badge-bg);
      }

      @media (prefers-color-scheme: dark) {
        :root {
          --color-primary: var(--gray-6);
          --color-secondary: var(--gray-1);
          --color-accent: var(--gray-3);
          --color-bg: var(--gray-12);
          --color-badge-bg: var(--gray-8);
          --color-border: var(--color-badge-bg);
        }
      }

      body {
        font-family:
          "Inter Variable",
          "Noto Sans SC Variable",
          system-ui,
          -apple-system,
          sans-serif;
        line-height: 1.6;
        color: var(--color-primary);
        background: var(--color-bg);
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
        contain: content;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        color: var(--color-primary);
        text-rendering: optimizeLegibility;
        margin: 0.5em 0;
        font-weight: 600;
        line-height: 1.3;
      }

      a,
      button,
      [role="button"] {
        text-decoration: none;
        color: var(--color-secondary);
        font-weight: 500;
        position: relative;
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
      }

      a:hover,
      button:hover,
      [role="button"]:hover {
        color: var(--color-primary);
        transform: scale(1.1);
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .c {
        border: 1px solid var(--color-border);
        padding: 20px;
        border-radius: 5px;
        margin-top: 20px;
        contain: content;
      }

      .section-group {
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .section-group:has(.section-item:hover) .section-item:not(:hover) {
        opacity: 0.5;
        transform: scale(1);
        transition:
          opacity 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94),
          transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .p {
        margin-bottom: 20px;
        padding: 15px;
        border-radius: 5px;
        border-left: 4px solid var(--color-secondary);
        will-change: transform;
        transform: translateZ(0);
        contain: layout;
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      .p:hover {
        transform: translateX(2px);
      }

      .p h3 {
        margin-top: 0;
        color: var(--color-secondary);
      }

      .p p {
        margin-bottom: 10px;
        color: var(--color-primary);
      }

      footer {
        margin-top: 30px;
        color: var(--color-secondary);
        font-size: 0.9em;
        text-align: center;
      }
    </style>
    <slot name="head" />
  </head>
  <body>
    <slot />

    <footer>
      &copy; {currentYear} Library
    </footer>

    <script>
      document.addEventListener(
        "click",
        e => {
          const link = e.target.closest("a");
          if (link && link.hostname !== window.location.hostname) {
            link.setAttribute("rel", "noopener noreferrer");
          }
        },
        { passive: true }
      );
    </script>
  </body>
</html>
